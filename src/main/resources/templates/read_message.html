<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Welcome to Sojrel Sacco Ltd</title>
  <link th:fragment="icon" rel="icon" type="image/x-icon" href="/images/favicon.ico">
  <link href="https://cdn.datatables.net/v/bs5/jq-3.7.0/dt-1.13.6/datatables.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://fonts.cdnfonts.com/css/poppins" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<!--  <link href="https://fonts.googleapis.com/css2?family=Mina:wght@400;700&display=swap" rel="stylesheet">-->
  <link href="https://db.onlinewebfonts.com/c/1bc63305a1c0194a52fbbd76c1143710?family=CenturyGothic-Regular" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/v/bs5/jq-3.7.0/dt-1.13.6/datatables.min.js"></script>
</head>
<body>
<div id="navbar-container" th:insert="~{base :: navbar}"></div>
<div class="container-fluid body-section">
  <div class="row">
    <div th:insert="~{base :: sidebar}" class="sidebar-container col-md-2 col-lg-2 p-0" id="sidebar-container"></div>
    <div class="col-md-10 main-section">
      <span class="d-flex justify-content-center mt-3 text-success fw-bold fs-3">Message Details</span>
      <hr class="border-2 border-success">
      <div class="container">
        <table class="table" id="details-table">
          <tbody>
          <tr>
            <th scope="row row-scoped">Date:</th>
            <td th:text="${#temporals.format(message.contactDate, 'dd MMM yyyy')}"></td>
          </tr>
          <tr>
            <th scope="row row-scoped">Time:</th>
            <td th:text="${#temporals.format(message.contactDate, 'HH:MM:ss')}"></td>
          </tr>
          <tr>
            <th scope="row row-scoped">Name</th>
            <td th:text="${message.firstName}+' '+${message.lastName}"></td>
          </tr>
          <tr>
            <th scope="row row-scoped">Email</th>
            <td><a th:text="${message.email}" th:href="'mailto:'+${message.email}" style="text-decoration:none; color:black;"></a></td>
          </tr>
          <tr>
            <th scope="row row-scoped">Phone Number:</th>
            <td><a th:text="${message.phone}" th:href="'tel:'+${message.phone}" style="text-decoration:none; color:black;"></a></td>
          </tr>
          </tbody>
        </table>
      </div>
      <div class="container my-3">
        <p class="my-2 fw-bold">Message</p>
        <textarea disabled th:text="${message.message}" rows="10" style="width:100%;"></textarea>
      </div>

      <div class="d-flex justify-content-center">
        <a th:href="@{/messages}"><button class="btn mx-3">Back</button></a>
        <div th:if="${message.isRead}">
          <form th:action="@{/mark-read-message/{id}(id=${message.id})}" th:method="post">
            <button type="submit" class="btn mx-3" >Mark as Read</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<!--<div th:insert="~{base :: footer}">  </div>-->
<script src="main.js" type="text/javascript"></script>
<script src="jquery.js" type="text/javascript"></script>
</body>
</html>
